<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Full Scientific Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
  <div class="bg-white shadow-xl rounded-xl p-6 w-full max-w-3xl">
    <h1 class="text-2xl font-bold text-center text-gray-800 mb-4">
      <i class="fas fa-calculator text-indigo-600 mr-2"></i>Full Scientific Calculator
    </h1>

    <input type="text" id="display" class="form-control text-end text-xl mb-4 bg-gray-100" disabled/>

    <!-- Button Grid -->
    <div class="grid grid-cols-8 gap-2 text-white text-sm">
      <!-- Memory and Clear Controls -->
      <button onclick="memoryClear()" class="btn btn-secondary">MC</button>
      <button onclick="memoryRecall()" class="btn btn-secondary">MR</button>
      <button onclick="memoryAdd()" class="btn btn-secondary">M+</button>
      <button onclick="memorySubtract()" class="btn btn-secondary">M−</button>
      <button onclick="clearEntry()" class="btn btn-danger">CE</button>
      <button onclick="allClear()" class="btn btn-danger">AC</button>
      <button onclick="backspace()" class="btn btn-warning"><i class="fas fa-backspace"></i></button>
      <button onclick="toggleSign()" class="btn btn-warning">±</button>

      <!-- Trig & Inverse -->
      <button onclick="appendFunc('Math.sin(')" class="btn btn-primary">sin</button>
      <button onclick="appendFunc('Math.cos(')" class="btn btn-primary">cos</button>
      <button onclick="appendFunc('Math.tan(')" class="btn btn-primary">tan</button>
      <button onclick="appendFunc('Math.asin(')" class="btn btn-primary">asin</button>
      <button onclick="appendFunc('Math.acos(')" class="btn btn-primary">acos</button>
      <button onclick="appendFunc('Math.atan(')" class="btn btn-primary">atan</button>
      <button onclick="appendFunc('Math.sinh(')" class="btn btn-primary">sinh</button>
      <button onclick="appendFunc('Math.cosh(')" class="btn btn-primary">cosh</button>

      <button onclick="appendFunc('Math.tanh(')" class="btn btn-primary">tanh</button>
      <button onclick="appendFunc('Math.log(')" class="btn btn-success">ln</button>
      <button onclick="appendFunc('Math.log10(')" class="btn btn-success">log</button>
      <button onclick="appendFunc('Math.pow(10,'" class="btn btn-success">10^x</button>
      <button onclick="appendFunc('Math.exp(')" class="btn btn-success">e^x</button>
      <button onclick="appendFunc('Math.sqrt(')" class="btn btn-success">√</button>
      <button onclick="appendFunc('root(')" class="btn btn-success">ʸ√x</button>
      <button onclick="appendFunc('Math.abs(')" class="btn btn-success">|x|</button>

      <!-- Constants -->
      <button onclick="appendConst('Math.PI')" class="btn btn-purple">π</button>
      <button onclick="appendConst('Math.E')" class="btn btn-purple">e</button>
      <button onclick="appendConst('(1+Math.sqrt(5))/2')" class="btn btn-purple">φ</button>
      <button onclick="appendFunc('degToRad(')" class="btn btn-purple">°→rad</button>
      <button onclick="appendFunc('radToDeg(')" class="btn btn-purple">rad→°</button>
      <button onclick="appendFunc('Math.random()')" class="btn btn-purple">rand</button>
      <button onclick="append('%')" class="btn btn-purple">%</button>
      <button onclick="appendFunc('factorial(')" class="btn btn-info">x!</button>

      <!-- Combinations / Permutations -->
      <button onclick="appendFunc('choose(')" class="btn btn-warning">nCr</button>
      <button onclick="appendFunc('perm(')" class="btn btn-warning">nPr</button>
      <button onclick="append('(')" class="btn btn-dark">(</button>
      <button onclick="append(')')" class="btn btn-dark">)</button>
      <button onclick="append('7')" class="btn btn-dark">7</button>
      <button onclick="append('8')" class="btn btn-dark">8</button>
      <button onclick="append('9')" class="btn btn-dark">9</button>
      <button onclick="append('/')" class="btn btn-danger">÷</button>

      <button onclick="append('4')" class="btn btn-dark">4</button>
      <button onclick="append('5')" class="btn btn-dark">5</button>
      <button onclick="append('6')" class="btn btn-dark">6</button>
      <button onclick="append('*')" class="btn btn-danger">×</button>
      <button onclick="append('1')" class="btn btn-dark">1</button>
      <button onclick="append('2')" class="btn btn-dark">2</button>
      <button onclick="append('3')" class="btn btn-dark">3</button>
      <button onclick="append('-')" class="btn btn-danger">−</button>
      <button onclick="append('0')" class="btn btn-dark col-span-2">0</button>
      <button onclick="append('.')" class="btn btn-dark">.</button>
      <button onclick="calculate()" class="btn btn-success">=</button>
      <button onclick="append('+')" class="btn btn-danger">+</button>
    </div>
  </div>

  <script>
    let display = document.getElementById("display");
    let memory = 0;

    function append(val) {
      display.value += val;
    }

    function appendFunc(f) {
      display.value += f;
    }

    function appendConst(c) {
      display.value += c;
    }

    function clearEntry() {
      display.value = '';
    }

    function allClear() {
      display.value = '';
      memory = 0;
    }

    function backspace() {
      display.value = display.value.slice(0, -1);
    }

    function toggleSign() {
      display.value = display.value.startsWith('-') ? display.value.slice(1) : '-' + display.value;
    }

    function memoryAdd() {
      try { memory += eval(display.value); } catch {}
    }

    function memorySubtract() {
      try { memory -= eval(display.value); } catch {}
    }

    function memoryRecall() {
      display.value += memory;
    }

    function memoryClear() {
      memory = 0;
    }

    function factorial(n) {
      return (n <= 1) ? 1 : n * factorial(n - 1);
    }

    function choose(n, r) {
      return factorial(n) / (factorial(r) * factorial(n - r));
    }

    function perm(n, r) {
      return factorial(n) / factorial(n - r);
    }

    function degToRad(deg) {
      return deg * (Math.PI / 180);
    }

    function radToDeg(rad) {
      return rad * (180 / Math.PI);
    }

    function root(x, y) {
      return Math.pow(x, 1 / y);
    }

    function calculate() {
      try {
        let expr = display.value
          .replace(/(\d+)!/g, (_, n) => factorial(Number(n)))
          .replace(/%/g, '*0.01')
          .replace(/÷/g, '/')
          .replace(/×/g, '*');
        display.value = eval(expr);
      } catch (e) {
        display.value = 'Error';
      }
    }

    // Keyboard support
    document.addEventListener("keydown", (e) => {
      const key = e.key;
      if (/\d|\+|\-|\*|\/|\(|\)|\.|%/.test(key)) append(key);
      if (key === "Enter") calculate();
      if (key === "Backspace") backspace();
      if (key === "Delete") clearEntry();
    });
  </script>
</body>
</html>
