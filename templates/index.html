<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Full Scientific Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    .btn-purple {
      background-color: #8b5cf6;
      border-color: #8b5cf6;
    }
    .btn-purple:hover {
      background-color: #7c3aed;
      border-color: #7c3aed;
    }
    .calc-btn {
      height: 50px;
      font-size: 14px;
      font-weight: 600;
      border: 1px solid #e5e7eb;
      margin: 1px;
    }
    .calc-btn-wide {
      grid-column: span 2;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
  <div class="bg-white shadow-xl rounded-xl p-6 w-full max-w-4xl">
    <h1 class="text-2xl font-bold text-center text-gray-800 mb-4">
      <i class="fas fa-calculator text-indigo-600 mr-2"></i>Full Scientific Calculator
    </h1>

    <input type="text" id="display" class="form-control text-end text-xl mb-4 bg-gray-100 font-mono" disabled/>

    <!-- Button Grid -->
    <div class="grid grid-cols-8 gap-1 text-white text-sm">
      <!-- Row 1: Memory and Clear Controls -->
      <button onclick="memoryClear()" class="btn btn-secondary calc-btn">MC</button>
      <button onclick="memoryRecall()" class="btn btn-secondary calc-btn">MR</button>
      <button onclick="memoryAdd()" class="btn btn-secondary calc-btn">M+</button>
      <button onclick="memorySubtract()" class="btn btn-secondary calc-btn">M−</button>
      <button onclick="clearEntry()" class="btn btn-danger calc-btn">CE</button>
      <button onclick="allClear()" class="btn btn-danger calc-btn">AC</button>
      <button onclick="backspace()" class="btn btn-warning calc-btn"><i class="fas fa-backspace"></i></button>
      <button onclick="toggleSign()" class="btn btn-warning calc-btn">±</button>

      <!-- Row 2: Trig Functions -->
      <button onclick="appendFunc('Math.sin(')" class="btn btn-primary calc-btn">sin</button>
      <button onclick="appendFunc('Math.cos(')" class="btn btn-primary calc-btn">cos</button>
      <button onclick="appendFunc('Math.tan(')" class="btn btn-primary calc-btn">tan</button>
      <button onclick="appendFunc('Math.asin(')" class="btn btn-primary calc-btn">asin</button>
      <button onclick="appendFunc('Math.acos(')" class="btn btn-primary calc-btn">acos</button>
      <button onclick="appendFunc('Math.atan(')" class="btn btn-primary calc-btn">atan</button>
      <button onclick="appendFunc('Math.sinh(')" class="btn btn-primary calc-btn">sinh</button>
      <button onclick="appendFunc('Math.cosh(')" class="btn btn-primary calc-btn">cosh</button>

      <!-- Row 3: More functions -->
      <button onclick="appendFunc('Math.tanh(')" class="btn btn-primary calc-btn">tanh</button>
      <button onclick="appendFunc('Math.log(')" class="btn btn-success calc-btn">ln</button>
      <button onclick="appendFunc('Math.log10(')" class="btn btn-success calc-btn">log</button>
      <button onclick="appendFunc('Math.pow(10,')" class="btn btn-success calc-btn">10^x</button>
      <button onclick="appendFunc('Math.exp(')" class="btn btn-success calc-btn">e^x</button>
      <button onclick="appendFunc('Math.sqrt(')" class="btn btn-success calc-btn">√</button>
      <button onclick="appendFunc('root(')" class="btn btn-success calc-btn">ʸ√x</button>
      <button onclick="appendFunc('Math.abs(')" class="btn btn-success calc-btn">|x|</button>

      <!-- Row 4: Constants and conversions -->
      <button onclick="appendConst('Math.PI')" class="btn btn-purple calc-btn">π</button>
      <button onclick="appendConst('Math.E')" class="btn btn-purple calc-btn">e</button>
      <button onclick="appendConst('(1+Math.sqrt(5))/2')" class="btn btn-purple calc-btn">φ</button>
      <button onclick="appendFunc('degToRad(')" class="btn btn-purple calc-btn">°→rad</button>
      <button onclick="appendFunc('radToDeg(')" class="btn btn-purple calc-btn">rad→°</button>
      <button onclick="appendFunc('Math.random()')" class="btn btn-purple calc-btn">rand</button>
      <button onclick="append('%')" class="btn btn-purple calc-btn">%</button>
      <button onclick="appendFunc('factorial(')" class="btn btn-info calc-btn">x!</button>

      <!-- Row 5: Combinations/Permutations and parentheses -->
      <button onclick="appendFunc('choose(')" class="btn btn-warning calc-btn">nCr</button>
      <button onclick="appendFunc('perm(')" class="btn btn-warning calc-btn">nPr</button>
      <button onclick="append('(')" class="btn btn-dark calc-btn">(</button>
      <button onclick="append(')')" class="btn btn-dark calc-btn">)</button>
      <button onclick="append('7')" class="btn btn-dark calc-btn">7</button>
      <button onclick="append('8')" class="btn btn-dark calc-btn">8</button>
      <button onclick="append('9')" class="btn btn-dark calc-btn">9</button>
      <button onclick="append('/')" class="btn btn-danger calc-btn">÷</button>

      <!-- Row 6: Numbers and operators -->
      <button onclick="append('^')" class="btn btn-success calc-btn">x^y</button>
      <button onclick="append('**')" class="btn btn-success calc-btn">**</button>
      <button onclick="append('mod')" class="btn btn-info calc-btn">mod</button>
      <button onclick="append(',')" class="btn btn-dark calc-btn">,</button>
      <button onclick="append('4')" class="btn btn-dark calc-btn">4</button>
      <button onclick="append('5')" class="btn btn-dark calc-btn">5</button>
      <button onclick="append('6')" class="btn btn-dark calc-btn">6</button>
      <button onclick="append('*')" class="btn btn-danger calc-btn">×</button>

      <!-- Row 7: More numbers -->
      <button onclick="append('1')" class="btn btn-dark calc-btn">1</button>
      <button onclick="append('2')" class="btn btn-dark calc-btn">2</button>
      <button onclick="append('3')" class="btn btn-dark calc-btn">3</button>
      <button onclick="append('-')" class="btn btn-danger calc-btn">−</button>
      <button onclick="append('0')" class="btn btn-dark calc-btn calc-btn-wide">0</button>
      <button onclick="append('.')" class="btn btn-dark calc-btn">.</button>
      <button onclick="calculate()" class="btn btn-success calc-btn">=</button>
      <button onclick="append('+')" class="btn btn-danger calc-btn">+</button>
    </div>
  </div>

  <script>
    let display = document.getElementById("display");
    let memory = 0;

    function append(val) {
      display.value += val;
    }

    function appendFunc(f) {
      display.value += f;
    }

    function appendConst(c) {
      display.value += c;
    }

    function clearEntry() {
      display.value = '';
    }

    function allClear() {
      display.value = '';
      memory = 0;
    }

    function backspace() {
      display.value = display.value.slice(0, -1);
    }

    function toggleSign() {
      if (display.value) {
        display.value = display.value.startsWith('-') ? display.value.slice(1) : '-' + display.value;
      }
    }

    function memoryAdd() {
      try { 
        let result = eval(display.value);
        memory += result;
      } catch {}
    }

    function memorySubtract() {
      try { 
        let result = eval(display.value);
        memory -= result;
      } catch {}
    }

    function memoryRecall() {
      display.value += memory;
    }

    function memoryClear() {
      memory = 0;
    }

    function factorial(n) {
      if (n < 0) return NaN;
      if (n === 0 || n === 1) return 1;
      let result = 1;
      for (let i = 2; i <= n; i++) {
        result *= i;
      }
      return result;
    }

    function choose(n, r) {
      if (r > n || r < 0) return 0;
      return factorial(n) / (factorial(r) * factorial(n - r));
    }

    function perm(n, r) {
      if (r > n || r < 0) return 0;
      return factorial(n) / factorial(n - r);
    }

    function degToRad(deg) {
      return deg * (Math.PI / 180);
    }

    function radToDeg(rad) {
      return rad * (180 / Math.PI);
    }

    function root(x, y) {
      return Math.pow(x, 1 / y);
    }

    function calculate() {
      try {
        let expr = display.value
          .replace(/(\d+)!/g, (match, n) => factorial(Number(n)))
          .replace(/%/g, '*0.01')
          .replace(/÷/g, '/')
          .replace(/×/g, '*')
          .replace(/\^/g, '**')
          .replace(/mod/g, '%');
        
        let result = eval(expr);
        display.value = result;
      } catch (e) {
        display.value = 'Error';
      }
    }

    // Keyboard support
    document.addEventListener("keydown", (e) => {
      const key = e.key;
      if (/\d|\+|\-|\*|\/|\(|\)|\.|%/.test(key)) {
        append(key);
      }
      if (key === "Enter" || key === "=") {
        calculate();
      }
      if (key === "Backspace") {
        backspace();
      }
      if (key === "Delete" || key === "Escape") {
        clearEntry();
      }
    });
  </script>
</body>
</html>
